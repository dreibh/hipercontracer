.\" High-Performance Connectivity Tracer (HiPerConTracer)
.\" Copyright (C) 2015-2024 by Thomas Dreibholz
.\"
.\" This program is free software: you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation, either version 3 of the License, or
.\" (at your option) any later version.
.\"
.\" This program is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with this program.  If not, see <http://www.gnu.org/licenses/>.
.\"
.\" Contact: thomas.dreibholz@gmail.com
.\"
.\" ###### Setup ############################################################
.Dd November 8, 2023
.Dt hpct-query 1
.Os hpct-query
.\" ###### Name #############################################################
.Sh NAME
.Nm hpct-query
.Nd HiPerConTracer Query Tool
.\" ###### Synopsis #########################################################
.Sh SYNOPSIS
.Nm hpct-query
database_configuration
ping|traceroute|jitter
.Op \-L|\-\-loglevel LEVEL
.Op \-Z|\-\-logcolor on|off
.Op \-O|\-\-logfile FILE
.Op \-q|\-\-quiet
.Op \-v|\-\-verbose
.Op \-o|\-\-output filename
.Op \-T|\-\-table table_name
.Op \-V|\-\-table\-version version
.Op \-M|\-\-address\-to\-measurementid mapping_file
.Op \-\-from-time timestamp
.Op \-\-to_time timestamp
.Op \-\-from-measurement-id measurement_identifier
.Op \-\-to_measurement-id measurement_identifier
.\" ###### Description ######################################################
.Sh DESCRIPTION
.Nm hpct-query
provides a simple query command to query a HiPerConTracer database for
Ping or Traceroute results within a given time range. The output format is
that same as the uncompressed HiPerConTracer results formant. See the
HiPerConTracer manpage for the format description.
.Pp
.\" ###### Arguments ########################################################
.Sh ARGUMENTS
The following argument may be provided:
.Bl -tag -width indent
.It \-L|\-\-loglevel LEVEL
Sets the minimum logging level to the provided value: 0=trace, 1=debug, 2=info, 3=warning, 4=error, 5=fatal.
.It \-q|\-\-quiet
Sets the minimum logging level to 3 (warning).
.It \-v|\-\-verbose
Sets the minimum logging level to 0 (trace).
.It \-Z|\-\-logcolor on|off
Enables (on) or disables (off) the usage of ANSI color escape sequences to colorise the log output according to its level.
.It \-O|\-\-logfile FILE
Sets a file name for appending the log output to. If a file is set, no log output is made to the console. Otherwise, all log output will be written to the console.
.It \-o|\-\-output filename
Sets the specified filename as output file. Extensions \.gz, \.bz2, and \.xz are recognised to enable compression.
.It \-T|\-\-table table_name
Sets a custom table name to query from.
.It \-V|\-\-table\-version version
Sets the table version (default is: 2). This option is to be used to read a table from on older HiPerConTracer schema version.
.It \-M|\-\-address\-to\-measurementid mapping_file
Sets a mapping file, containing space-separated IP address to measurement ID mappings with one mapping per line. Where measurement ID is zero, the measurement ID is looked up from the mappings. This option can be used to later map measurements to a useful measurement ID for export.
Example mapping file contents:
.br
1.2.3.4 1000
.br
3ffe::1:2:3 1000
.br
5.6.7.8 2222
.br
2001::1:2:3 2222
.br
 ...
.It \-\-from-time timestamp
Set the beginning of the time range as string in format "%Y-%m-%d %H:%M:%S.%F".
If not provided, all results will be queried.
.It \-\-to_time timestamp
Set the end of the time range as string in format "%Y-%m-%d %H:%M:%S.%F".
If not provided, all results after a given from-time will be queried.
.It \-\-from-measurement-id measurement_identifier
Set the beginning of the measurement identifier range.
If not provided, all results will be queried.
.It \-\-to_measurement-id measurement_identifier
Set the end of the measurement identifier range.
If not provided, all results will be queried.
.El
.\" ###### Arguments ########################################################
.Sh EXAMPLES
.Bl -tag -width indent
.It hpct-query hipercontracer-database.conf ping
.It hpct-query hipercontracer-database.conf traceroute
.It hpct-query hipercontracer-database.conf ping --from-time "2022-09-29 13:00:00"
.It hpct-query hipercontracer-database.conf traceroute --from-time "2022-09-29 00:00:00" --to-time "2022-09-29 12:00:00"
.It hpct-query hipercontracer-database.conf traceroute --from-measurement-id 1000 --to-measurement-id 2000
.It hpct-query hipercontracer-database.conf traceroute --from-measurement-id 1000 --to-measurement-id 2000 --output results.xz
.It hpct-query hipercontracer-database.conf ping --table test_ping_table
.It hpct-query hipercontracer-database.conf traceroute  -T Traceroute_v1 -V 1 --from-time 2015-10-16 --to-time 2015-10-17 --output "Traceroute-2015-10-16.results.xz" -M addressmappings.txt
.El
.\" ###### Authors ##########################################################
.Sh AUTHORS
Thomas Dreibholz
.br
https://www.nntb.no/~dreibh/hipercontracer
.br
mailto://thomas.dreibholz@gmail.com
.br
